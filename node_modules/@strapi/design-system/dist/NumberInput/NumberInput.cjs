"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("react/jsx-runtime"),f=require("react"),x=require("@internationalized/number"),q=require("@strapi/icons"),$=require("prop-types"),z=require("styled-components"),B=require("../helpers/getDefaultLocale.cjs"),N=require("../helpers/keyboardKeys.cjs"),E=require("../hooks/useControllableState.cjs"),M=require("../hooks/useId.cjs"),U=require("../themes/sizes.cjs"),H=require("../Field/Field.cjs"),W=require("../Flex/Flex.cjs"),X=require("../Field/FieldLabel.cjs"),Y=require("../Field/FieldInput.cjs"),v=require("../Icon/Icon.cjs"),G=require("../Field/FieldHint.cjs"),J=require("../Field/FieldError.cjs"),m=r=>r&&r.__esModule?r:{default:r},Q=m(f),t=m($),Z=m(z),I=Z.default.button`
  display: flex;
  height: 1rem;
  align-items: ${({reverse:r})=>r?"flex-end":"flex-start"};
  transform: translateY(${({reverse:r})=>r?"-2px":"2px"});
  cursor: ${({disabled:r})=>r?"not-allowed":void 0};
  svg {
    display: block;
    height: ${4/16}rem;
    transform: ${({reverse:r})=>r?"rotateX(180deg)":void 0};
  }
`,ee="",c=Q.default.forwardRef(({size:r,startAction:F,name:w,hint:j,error:D,label:p,labelAction:A,locale:V,id:C,onValueChange:R,value:b,step:s,required:_,disabled:u,...P},k)=>{const K=M.useId(C),g=V||B.getDefaultLocale(),l=f.useRef(new x.NumberParser(g,{style:"decimal"})),d=f.useRef(new x.NumberFormatter(g,{maximumFractionDigits:20})),[o,S]=E.useControllableState({prop(e){const a=String(b);return isNaN(a)||a!==e&&e!==""?e:d.current.format(b)},defaultProp:ee,onChange(e){const a=l.current.parse(e);R(isNaN(a)?void 0:a)}}),i=e=>{S(String(e))},L=({target:{value:e}})=>{l.current.isValidPartialNumber(e)&&i(e)},y=()=>{if(!o){i(s);return}const e=l.current.parse(o),a=isNaN(e)?s:e+s;i(d.current.format(a))},h=()=>{if(!o){i(-s);return}const e=l.current.parse(o),a=isNaN(e)?-s:e-s;i(d.current.format(a))},O=e=>{if(!u)switch(e.key){case N.KeyboardKeys.DOWN:{e.preventDefault(),h();break}case N.KeyboardKeys.UP:{e.preventDefault(),y();break}}},T=()=>{if(o){const e=l.current.parse(o),a=isNaN(e)?"":d.current.format(e);i(a)}};return n.jsx(H.Field,{name:w,hint:j,error:D,id:K,required:_,children:n.jsxs(W.Flex,{direction:"column",alignItems:"stretch",gap:1,children:[p&&n.jsx(X.FieldLabel,{action:A,children:p}),n.jsx(Y.FieldInput,{ref:k,startAction:F,disabled:u,type:"text",inputmode:"decimal",onChange:L,onKeyDown:O,onBlur:T,value:o,size:r,endAction:n.jsxs(n.Fragment,{children:[n.jsx(I,{disabled:u,"aria-hidden":!0,reverse:!0,onClick:y,tabIndex:-1,type:"button","data-testid":"ArrowUp",children:n.jsx(v.Icon,{as:q.CarretDown,color:"neutral500"})}),n.jsx(I,{disabled:u,"aria-hidden":!0,onClick:h,tabIndex:-1,type:"button","data-testid":"ArrowDown",children:n.jsx(v.Icon,{as:q.CarretDown,color:"neutral500"})})]}),...P}),n.jsx(G.FieldHint,{}),n.jsx(J.FieldError,{})]})})});c.displayName="NumberInput";c.defaultProps={"aria-label":void 0,disabled:!1,error:void 0,hint:void 0,id:void 0,label:void 0,labelAction:void 0,locale:void 0,required:!1,size:"M",startAction:void 0,step:1,value:void 0};c.propTypes={"aria-label":t.default.string,disabled:t.default.bool,error:t.default.string,hint:t.default.oneOfType([t.default.string,t.default.node,t.default.arrayOf(t.default.node)]),id:t.default.string,label:t.default.string,labelAction:t.default.element,locale:t.default.string,name:t.default.string.isRequired,onValueChange:t.default.func.isRequired,required:t.default.bool,size:t.default.oneOf(Object.keys(U.sizes.input)),startAction:t.default.element,step:t.default.number,value:t.default.number};exports.NumberInput=c;
