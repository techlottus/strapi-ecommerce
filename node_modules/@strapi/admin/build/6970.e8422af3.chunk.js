"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[6970],{55433:function(U,g,e){e.d(g,{r:function(){return E}});var o=e(32735),l=e(60216),y=e.n(l),D=e(74506),T=e(72850);function v(c,p,a){if(!c||!p)return{display:"none"};const{x:d,y:M}=a;return{transform:`translate(${d}px, ${M}px)`}}function E({renderItem:c}){const{itemType:p,isDragging:a,item:d,initialOffset:M,currentOffset:k,mouseOffset:N}=(0,D.useDragLayer)(R=>({item:R.getItem(),itemType:R.getItemType(),initialOffset:R.getInitialSourceClientOffset(),currentOffset:R.getSourceClientOffset(),isDragging:R.isDragging(),mouseOffset:R.getClientOffset()}));return a?o.createElement(T.x,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%"},o.createElement(T.x,{style:v(M,k,N)},c({type:p,item:d}))):null}E.propTypes={renderItem:y().func.isRequired}},73386:function(U,g,e){var o=e(32735);const l=(0,o.createContext)();var y=null},56327:function(U,g,e){e.d(g,{PL:function(){return T},Y9:function(){return Te.Y},zE:function(){return X},Ky:function(){return r},fi:function(){return h},zH:function(){return ge},r5:function(){return Z}});var o=e(32735),l=e(15062),y=e(70031),T=()=>{const t=(0,l.v9)(y.Z),s=(0,o.useCallback)(n=>t?.components?.[n]??{},[t]);return{...t,getComponentLayout:s}},v=e(84306),E=e(24989),c=e(99381),p=e.n(c),a=e(33795),d=e.n(a),M=e(3040),k=e.n(M),N=e(95952);const R=(t,s)=>s.find(n=>n.uid===t),_=(t,s)=>{const n=Y(t,s),i=z(n.contentType,s),O=q(n.contentType,n.components);return k()(n,["contentType","layouts","edit"],i),k()(n,["contentType","layouts","list"],O),Object.keys(n.components).forEach(f=>{const L=z(n.components[f],s);k()(n,["components",f,"layouts","edit"],L)}),n},Y=(t,s)=>{const n=(0,N.w8)(p()(t),s,"contentType"),{components:i,contentType:O}=n,f=L=>Object.keys(L.metadatas).reduce((S,I)=>{const w=d()(L,["attributes",I],{});let b=L.metadatas[I];if(w.type==="relation"){const fe=R(w.targetModel,s),j=b.edit.mainField,V={name:j,schema:d()(fe,["attributes",j])};b={list:{...b.list,mainField:V},edit:{...b.edit,mainField:V}}}return S[I]=b,S},{});return k()(n,["contentType","metadatas"],f(O)),Object.keys(i).forEach(L=>{const S=i[L],I=f(S);k()(n,["components",L,"metadatas"],I)}),n},z=(t,s)=>t.layouts.edit.reduce((n,i)=>{const O=i.map(f=>{const L=d()(t,["attributes",f.name],{}),S={...f,fieldSchema:L,metadatas:d()(t,["metadatas",f.name,"edit"],{})};if(L.type==="relation"){const w=R(L.targetModel,s).pluginOptions||{};k()(S,"targetModelPluginOptions",w),k()(S,"queryInfos",{shouldDisplayRelationLink:re(t,f.name,s)})}return S});return n.push(O),n},[]),q=(t,s)=>t.layouts.list.reduce((i,O)=>{const f=d()(t,["attributes",O],{}),L=d()(t,["metadatas",O,"list"],{}),S=f.type;if(S==="relation")return i.push({key:`__${O}_key__`,name:O,fieldSchema:f,metadatas:L}),i;if(S==="component"){const I=s[f.component],w=I.settings.mainField,b=I.attributes[w];return i.push({key:`__${O}_key__`,name:O,fieldSchema:f,metadatas:{...L,mainField:{...b,name:w}}}),i}return i.push({key:`__${O}_key__`,name:O,fieldSchema:f,metadatas:L}),i},[]),re=(t,s,n)=>{const i=d()(t,["attributes",s,"targetModel"],"");return ee(n).includes(i)},ee=t=>t.filter(s=>s.isDisplayed).map(({uid:s})=>s);var H=_,te=e(97889);const K={error:null,isLoading:!0,layout:{},layouts:{}};var Q=(t,s)=>(0,te.ZP)(t,n=>{switch(s.type){case"GET_DATA":{n.isLoading=!0,n.error=null,n.layout={};break}case"GET_DATA_SUCCEEDED":{const i=s.data.contentType.uid;n.layout=s.data,n.layouts[i]=s.data,n.isLoading=!1;break}case"GET_DATA_ERROR":{n.isLoading=!1,n.error=s.error;break}case"SET_LAYOUT_FROM_STATE":{n.error=null,n.layout=t.layouts[s.uid];break}case"UPDATE_LAYOUT":{const i=t.layout;n.layout={...i,contentType:{uid:i.contentType.uid,...s.newLayout.contentType}},n.layouts[i.contentType.uid]={...i,contentType:{uid:i.contentType.uid,...s.newLayout.contentType}};break}default:return n}}),B=e(42882),X=t=>{const[{error:s,isLoading:n,layout:i,layouts:O},f]=(0,o.useReducer)(Q,K),L=(0,o.useMemo)(B.Vo,[]),{schemas:S}=(0,l.v9)(j=>L(j),l.wU),I=(0,o.useRef)(!0),{get:w}=(0,E.kY)(),b=(0,o.useCallback)(async(j,V)=>{if(O[j]){f({type:"SET_LAYOUT_FROM_STATE",uid:j});return}f({type:"GET_DATA"});try{const oe=(0,N.IF)(`content-types/${j}/configuration`),{data:{data:ve}}=await w(oe,{cancelToken:V.token});f({type:"GET_DATA_SUCCEEDED",data:H(ve,S)})}catch(oe){if(v.default.isCancel(oe))return;I.current&&console.error(oe),I.current&&f({type:"GET_DATA_ERROR",error:oe})}},[O,S,w]);(0,o.useEffect)(()=>()=>{I.current=!1},[]),(0,o.useEffect)(()=>{const V=v.default.CancelToken.source();return b(t,V),()=>{V.cancel("Operation canceled by the user.")}},[t,b]);const fe=(0,o.useCallback)(j=>{f({type:"UPDATE_LAYOUT",newLayout:H(j,S)})},[S]);return{error:s,isLoading:n,layout:i,updateLayout:fe}},J=t=>t["content-manager_app"].collectionTypeLinks,$=e(33348),ie=e(85973),me=e.n(ie);const ue=(t,s)=>Object.keys(t).reduce((n,i)=>{const O=t[i],f=d()(s,[i],O);return me()(O)?{...n,[i]:ue(O,f)}:(n[i]=f,n)},{});var ye=(t,s,n)=>{const i=t.find(({to:b})=>b.includes(s));if(!i)return"/";const{to:O,search:f}=i,L=(0,$.parse)(f),S=(0,$.parse)(n.substring(1)),I=ue(L,S);return`${O}?${(0,$.stringify)(I,{encode:!1})}`},r=t=>{const[{rawQuery:s}]=(0,E.Kx)(),n=(0,l.v9)(J);return ye(n,t,s)},u=e(53038),h=()=>{const{search:t}=(0,u.TH)(),s=t?(0,$.parse)(t.substring(1)):{};return s.plugins?(0,$.stringify)({plugins:s.plugins},{encode:!1}):""},F=e(89334);const x=(t,s,n)=>({type:F.m,permissions:t,__meta__:{plugins:s,containerName:n}}),C=()=>({type:F.Q}),A=t=>t["content-manager_rbacManager"].permissions,P=t=>t.rbacProvider.collectionTypesRelatedPermissions;var Z=(t,s,n="listView")=>{const i=(0,l.v9)(P),O=(0,l.v9)(A),f=(0,l.I0)(),L=i[s];return(0,o.useEffect)(()=>L?(f(x(L,t?t.plugins:null,n)),()=>{f(C())}):()=>{},[L,f,t,n]),O},ce=e(73386);const G=()=>useContext(WysiwygContext);var se=null;const ge=t=>{const s=(0,o.useRef)();return(0,o.useEffect)(()=>{s.current=t},[t]),s.current};var Te=e(90553),Ee=e(18777)},90553:function(U,g,e){e.d(g,{Y:function(){return T}});var o=e(32735),l=e(74506),y=e.n(l),D=e(18777);const T=(v,{type:E="STRAPI_DND",index:c,item:p={},onStart:a,onEnd:d,onGrabItem:M,onDropItem:k,onCancel:N,onMoveItem:R,dropSensitivity:_="regular"})=>{const Y=(0,o.useRef)(null),[{handlerId:z},q]=(0,l.useDrop)({accept:E,collect(K){return{handlerId:K.getHandlerId()}},hover(K,ae){if(!Y.current)return;const Q=K.index,B=c;if(Q!==B){if(_==="regular"){const ne=Y.current.getBoundingClientRect(),X=(ne.bottom-ne.top)/2,J=ae.getClientOffset().y-ne.top;if(Q<B&&J<X||Q>B&&J>X)return}R(B,Q),K.index=B}}}),[{isDragging:re},ee,H]=(0,l.useDrag)({type:E,item(){a&&a();const{width:K}=Y.current?.getBoundingClientRect()??{};return{index:c,width:K,...p}},end(){d&&d()},canDrag:v,isDragging:p.id?K=>p.id===K.getItem().id:void 0,collect:K=>({isDragging:K.isDragging()})}),te=(0,D.A)(v,c,{onGrabItem:M,onDropItem:k,onCancel:N,onMoveItem:R});return[{handlerId:z,isDragging:re,handleKeyDown:te},Y,q,ee,H]}},18777:function(U,g,e){e.d(g,{A:function(){return l}});var o=e(32735);const l=(y,D,{onCancel:T,onDropItem:v,onGrabItem:E,onMoveItem:c})=>{const[p,a]=(0,o.useState)(!1),d=R=>{p&&(R==="UP"?c(D-1,D):R==="DOWN"&&c(D+1,D))},M=()=>{p?(v&&v(D),a(!1)):(E&&E(D),a(!0))},k=()=>{p&&(a(!1),T&&T(D))};return R=>{if(y&&!(R.key==="Tab"&&!p))switch(R.preventDefault(),R.key){case" ":case"Enter":M();break;case"Escape":k();break;case"ArrowDown":case"ArrowRight":d("DOWN");break;case"ArrowUp":case"ArrowLeft":d("UP");break;default:}}}},42882:function(U,g,e){e.d(g,{Jg:function(){return c},KQ:function(){return v},Vo:function(){return E},Yg:function(){return y}});var o=e(98178),l=e(34947);const y=()=>a=>a["content-manager_app"]||l.E,D=()=>createSelector(y(),a=>a),T=()=>createSelector(y(),a=>a.models),v=()=>(0,o.P1)(y(),a=>({collectionTypeLinks:a.collectionTypeLinks,singleTypeLinks:a.singleTypeLinks})),E=()=>(0,o.P1)(y(),({components:a,models:d})=>({schemas:[...a,...d]})),c=(0,o.P1)(y(),a=>a.fieldSizes);var p=null},70031:function(U,g){const e=o=>o["content-manager_editViewLayoutManager"].currentLayout;g.Z=e},25708:function(U,g){g.Z={COMPONENT:"component",EDIT_FIELD:"editField",FIELD:"field",DYNAMIC_ZONE:"dynamicZone",RELATION:"relation"}},47510:function(U,g){const e=o=>`content-manager.${o}`;g.Z=e},95952:function(U,g,e){e.d(g,{_Q:function(){return J.Z},W3:function(){return D},ko:function(){return c},FE:function(){return a},Di:function(){return N},du:function(){return z},TA:function(){return ee},Ts:function(){return ae},Uo:function(){return B},IF:function(){return X},OB:function(){return de.Z},w8:function(){return ue},kc:function(){return pe}});var o=e(99381),l=e.n(o),D=(r,u,m)=>{if(Array.isArray(r)&&u>=0&&m>=0&&u<=r.length-1&&m<=r.length-1){const h=l()(r),F=h.splice(u,1);return h.splice(m,0,F[0]),h}return r},T=e(59578),v=e.n(T),c=r=>{const u=r.type;return u==="relation"?!v()(r.relationType).includes("morph"):!["json","dynamiczone","richtext","password"].includes(u)&&!!u};const p=(r,u)=>{typeof r=="function"?r(u):r!=null&&(r.current=u)},a=(...r)=>u=>r.forEach(m=>p(m,u));var d=e(33795),M=e.n(d);const k=(r,u)=>Object.keys(r).reduce((m,h)=>{const F=M()(r,[h],{}),{default:x,component:C,type:A,required:P,min:W,repeatable:Z}=F;if(x!==void 0&&(m[h]=x),A==="component"){const ce=u?.[C]?.attributes??{},G=k(ce,u);if(P===!0&&(m[h]=Z===!0?[]:G),W&&Z===!0&&P){m[h]=[];for(let se=0;se<W;se+=1)m[h].push(G)}}return A==="dynamiczone"&&P===!0&&(m[h]=[]),m},{});var N=k,R=e(9086),_=e.n(R),z=({layouts:r,metadatas:u,...m})=>{const h=r.list.map(C=>C.name?C.name:C),F=Object.keys(u).reduce((C,A)=>{const P=M()(u,[A],{});let W=P.edit;return W.mainField&&(W={...W,mainField:P.edit.mainField.name}),{...C,[A]:{edit:W,list:_()(P.list,["mainField"])}}},{}),x=r.edit.map(C=>C.map(({name:A,size:P})=>({name:A,size:P})));return{...m,layouts:{edit:x,list:h},metadatas:F}};const q=(r,u)=>r.map(m=>({...m,subject:u}));var ee=r=>{const u={create:[{action:"plugin::content-manager.explorer.create",subject:null}],delete:[{action:"plugin::content-manager.explorer.delete",subject:null}],publish:[{action:"plugin::content-manager.explorer.publish",subject:null}],read:[{action:"plugin::content-manager.explorer.read",subject:null}],update:[{action:"plugin::content-manager.explorer.update",subject:null}]};return Object.keys(u).reduce((m,h)=>(m[h]=q(u[h],r),m),{})},H=e(95919),te=e.n(H),ae=r=>r.split(".").filter(u=>te()(parseInt(u,10))),B=r=>{if(r.length===0)return-1;const u=Math.max.apply(Math,r.map(m=>m.__temp_key__??0));return Number.isNaN(u)?-1:u},X=r=>`/content-manager/${r}`,de=e(47510),J=e(25708),$=e(3040),ie=e.n($),ue=(r,u,m)=>{const h=A=>u.find(P=>P.uid===A),F=Object.assign({},r),x=r[m].uid,C=h(x);return ie()(F,[m],{...r[m],...C}),Object.keys(r.components).forEach(A=>{const P=h(A);ie()(F,["components",A],{...r.components[A],...P})}),F},le=e(24989),pe=(r,u,m)=>{const h=(F,x)=>Object.keys(F).reduce((C,A)=>{const P=(0,le.UN)(x,A),W=M()(F,A),Z=(0,le.k2)(x,[A,"component"]),ce=(0,le.k2)(x,[A,"repeatable"]);return P==="dynamiczone"?(C[A]=W.map(G=>h(G,m[G.__component])),C):P==="component"?(ce?C[A]=W&&W.map(G=>h(G,m[Z])):C[A]=W&&h(W,m[Z]),C):(P!=="password"&&(C[A]=W),C)},{});return h(r,u)}},28315:function(U,g,e){e.d(g,{K:function(){return c}});var o=e(32735),l=e(60216),y=e.n(l),D=e(67582),T=e(87933),v=e(49372),E=e(54504);function c({children:p,...a}){const{color:d}=a.data,{themeColorName:M}=(0,E.k)(d);return o.createElement(D.c.Option,{...a},o.createElement(T.k,{alignItems:"center",gap:2},o.createElement(T.k,{height:2,background:d,borderColor:M==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),o.createElement(v.Z,{textColor:"neutral800",ellipsis:!0},p)))}c.propTypes={children:y().node.isRequired,data:y().shape({color:y().string}).isRequired}},8445:function(U,g,e){e.d(g,{R:function(){return c}});var o=e(32735),l=e(60216),y=e.n(l),D=e(67582),T=e(87933),v=e(49372),E=e(54504);function c({children:p,...a}){const{color:d}=a.data,{themeColorName:M}=d?(0,E.k)(d):{};return o.createElement(D.c.SingleValue,{...a},o.createElement(T.k,{alignItems:"center",gap:2},o.createElement(T.k,{height:2,background:d,borderColor:M==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),o.createElement(v.Z,{textColor:"neutral800",ellipsis:!0},p)))}c.defaultProps={children:null},c.propTypes={children:y().node,data:y().shape({color:y().string}).isRequired}},61937:function(U,g,e){e.d(g,{$k:function(){return E},FT:function(){return p},Nj:function(){return v},Ot:function(){return T},QM:function(){return y},lv:function(){return c},sN:function(){return l},uL:function(){return a},x4:function(){return D}});var o=e(12301);const l="settings_review-workflows",y="Settings/Review_Workflows/SET_WORKFLOWS",D="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",T="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",v="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",E="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",c={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},p=o.W.colors.primary600,a={STAGE:"stage"}},67350:function(U,g,e){e.d(g,{n:function(){return T}});var o=e(20108),l=e(24989);const y="review-workflows",D="/admin/review-workflows";function T(v){const{get:E}=(0,l.kY)(),c=(0,o.useQueryClient)(),p=[y,v??"default"];async function a({params:k={populate:"stages"}}){try{const{data:{data:N}}=await E(`${D}/workflows/${v??""}`,{params:k});return N}catch{return null}}async function d(){await c.refetchQueries(p)}return{workflows:(0,o.useQuery)(p,a),refetchWorkflow:d}}},54504:function(U,g,e){e.d(g,{k:function(){return y},s:function(){return D}});var o=e(12301),l=e(61937);function y(T){if(!T)return null;const E=Object.entries(o.W.colors).filter(([,c])=>c.toUpperCase()===T.toUpperCase()).reduce((c,[p])=>(l.lv?.[p]&&(c=p),c),null);return E?{themeColorName:E,name:l.lv[E]}:null}function D(){return Object.entries(l.lv).map(([T,v])=>({hex:o.W.colors[T].toUpperCase(),name:v}))}}}]);
