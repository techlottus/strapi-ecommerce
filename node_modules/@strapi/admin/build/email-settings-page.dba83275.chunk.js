"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[1495],{97744:function(b,m,t){t.r(m),t.d(m,{default:function(){return J}});var e=t(32735),d=t(67879),n=t(24989),p=t(94638),f=t(27649),v=t(17e3),E=t(87933),g=t(72850),h=t(49372),x=t(15335),M=t(5803),y=t(10369),P=t(41415),S=t(7961),a=t(60216),l=t.n(a),c=t(8471),o=t(68465),u=t(84967),i=t(85684);const A=c.ZP.a`
  color: ${({theme:r})=>r.colors.primary600};
`,R=({config:r})=>{const{formatMessage:s}=(0,d.Z)();return e.createElement(E.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(E.k,{direction:"column",alignItems:"stretch",gap:1},e.createElement(h.Z,{variant:"delta",as:"h2"},s({id:(0,i.Z)("Settings.email.plugin.title.config"),defaultMessage:"Configuration"})),e.createElement(h.Z,null,s({id:(0,i.Z)("Settings.email.plugin.text.configuration"),defaultMessage:"The plugin is configured through the {file} file, checkout this {link} for the documentation."},{file:"./config/plugins.js",link:e.createElement(A,{href:"https://docs.strapi.io/developer-docs/latest/plugins/email.html",target:"_blank",rel:"noopener noreferrer"},s({id:(0,i.Z)("link"),defaultMessage:"Link"}))}))),e.createElement(x.r,{gap:5},e.createElement(M.P,{col:6,s:12},e.createElement(y.o,{name:"shipper-email",label:s({id:(0,i.Z)("Settings.email.plugin.label.defaultFrom"),defaultMessage:"Default sender email"}),placeholder:s({id:(0,i.Z)("Settings.email.plugin.placeholder.defaultFrom"),defaultMessage:"ex: Strapi No-Reply '<'no-reply@strapi.io'>'"}),disabled:!0,onChange:()=>{},value:r.settings.defaultFrom})),e.createElement(M.P,{col:6,s:12},e.createElement(y.o,{name:"response-email",label:s({id:(0,i.Z)("Settings.email.plugin.label.defaultReplyTo"),defaultMessage:"Default response email"}),placeholder:s({id:(0,i.Z)("Settings.email.plugin.placeholder.defaultReplyTo"),defaultMessage:"ex: Strapi '<'example@strapi.io'>'"}),disabled:!0,onChange:()=>{},value:r.settings.defaultReplyTo})),e.createElement(M.P,{col:6,s:12},e.createElement(o.P,{name:"email-provider",label:s({id:(0,i.Z)("Settings.email.plugin.label.provider"),defaultMessage:"Email provider"}),disabled:!0,onChange:()=>{},value:r.provider},e.createElement(u.W,{value:r.provider},r.provider)))))};R.propTypes={config:l().shape({provider:l().string,settings:l().shape({defaultFrom:l().string,defaultReplyTo:l().string})}).isRequired};var B=R,j=t(24346),D=j.Ry().shape({email:j.Z_().email(n.I0.email).required(n.I0.required)}),z=t(59990);const V=async()=>{const{get:r}=(0,n.tg)(),{data:s}=await r("/email/settings");return s.config},N=async r=>{const{post:s}=(0,n.tg)();await s("/email/test",r)};var $=t(82055),I=()=>{const{formatMessage:r}=(0,d.Z)();return e.createElement(e.Fragment,null,e.createElement(n.SL,{name:r({id:(0,i.Z)("Settings.email.plugin.title"),defaultMessage:"Configuration"})}),e.createElement($.T,{id:"title",title:r({id:(0,i.Z)("Settings.email.plugin.title"),defaultMessage:"Configuration"}),subtitle:r({id:(0,i.Z)("Settings.email.plugin.subTitle"),defaultMessage:"Test the settings for the Email plugin"})}))};const w=()=>e.createElement(n.O4,{permissions:z.Z.settings},e.createElement(G,null)),G=()=>{const r=(0,n.lm)(),{formatMessage:s}=(0,d.Z)(),{lockApp:k,unlockApp:Q}=(0,n.o1)(),{notifyStatus:O}=(0,p.G)();(0,n.go)();const[C,X]=(0,e.useState)({}),[Y,F]=(0,e.useState)(!1),[H,W]=(0,e.useState)(!1),[T,K]=(0,e.useState)(""),[q,U]=(0,e.useState)(!1),[_,ee]=(0,e.useState)({provider:"",settings:{defaultFrom:"",defaultReplyTo:"",testAddress:""}});(0,e.useEffect)(()=>{F(!0),V().then(Z=>{O(s({id:(0,i.Z)("Settings.email.plugin.notification.data.loaded"),defaultMessage:"Email settings data has been loaded"})),ee(Z);const L=Z?.settings?.testAddress;L&&K(L)}).catch(()=>r({type:"warning",message:s({id:(0,i.Z)("Settings.email.plugin.notification.config.error"),defaultMessage:"Failed to retrieve the email config"})})).finally(()=>F(!1))},[s,r,O]),(0,e.useEffect)(()=>{C.email&&document.querySelector("#test-address-input").focus()},[C]),(0,e.useEffect)(()=>{D.validate({email:T},{abortEarly:!1}).then(()=>U(!0)).catch(()=>U(!1))},[T]);const te=Z=>{K(()=>Z.target.value)},ne=async Z=>{Z.preventDefault();try{await D.validate({email:T},{abortEarly:!1}),W(!0),k(),N({to:T}).then(()=>{r({type:"success",message:s({id:(0,i.Z)("Settings.email.plugin.notification.test.success"),defaultMessage:"Email test succeeded, check the {to} mailbox"},{to:T})})}).catch(()=>{r({type:"warning",message:s({id:(0,i.Z)("Settings.email.plugin.notification.test.error"),defaultMessage:"Failed to send a test mail to {to}"},{to:T})})}).finally(()=>{W(!1),Q()})}catch(L){X((0,n.CJ)(L))}};return Y?e.createElement(f.o,{labelledBy:"title","aria-busy":"true"},e.createElement(I,null),e.createElement(v.D,null,e.createElement(n.dO,null))):e.createElement(f.o,{labelledBy:"title","aria-busy":H},e.createElement(I,null),e.createElement(v.D,null,e.createElement("form",{onSubmit:ne},e.createElement(E.k,{direction:"column",alignItems:"stretch",gap:7},e.createElement(g.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(B,{config:_})),e.createElement(g.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(E.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(h.Z,{variant:"delta",as:"h2"},s({id:(0,i.Z)("Settings.email.plugin.title.test"),defaultMessage:"Test email delivery"})),e.createElement(x.r,{gap:5,alignItems:"end"},e.createElement(M.P,{col:6,s:12},e.createElement(y.o,{id:"test-address-input",name:"test-address",onChange:te,label:s({id:(0,i.Z)("Settings.email.plugin.label.testAddress"),defaultMessage:"Recipient email"}),value:T,error:C.email?.id&&s({id:(0,i.Z)(`${C.email?.id}`),defaultMessage:"This is an invalid email"}),placeholder:s({id:(0,i.Z)("Settings.email.plugin.placeholder.testAddress"),defaultMessage:"ex: developer@example.com"})})),e.createElement(M.P,{col:7,s:12},e.createElement(P.z,{loading:H,disabled:!q,type:"submit",startIcon:e.createElement(S.Z,null)},s({id:(0,i.Z)("Settings.email.plugin.button.test-email"),defaultMessage:"Send test email"}))))))))))};var J=w},17e3:function(b,m,t){t.d(m,{D:function(){return f}});var e=t(74512),d=t(32735),n=t(60216),p=t(72850);const f=({children:v})=>(0,e.jsx)(p.x,{paddingLeft:10,paddingRight:10,children:v});f.propTypes={children:n.node.isRequired}},82055:function(b,m,t){t.d(m,{T:function(){return y}});var e=t(74512),d=t(32735),n=t(60216),p=t(8471);const f=a=>{const l=(0,d.useRef)(null),[c,o]=(0,d.useState)(!0),u=([i])=>{o(i.isIntersecting)};return(0,d.useEffect)(()=>{const i=l.current,A=new IntersectionObserver(u,a);return i&&A.observe(l.current),()=>{i&&A.disconnect()}},[l,a]),[l,c]};var v=t(63060);const E=(a,l)=>{const c=(0,v.W)(l);(0,d.useLayoutEffect)(()=>{const o=new ResizeObserver(c);return Array.isArray(a)?a.forEach(u=>{u.current&&o.observe(u.current)}):a.current&&o.observe(a.current),()=>{o.disconnect()}},[a,c])};var g=t(72850),h=t(87933),x=t(49372);const M=()=>{const a=(0,d.useRef)(null),[l,c]=(0,d.useState)(null),[o,u]=f({root:null,rootMargin:"0px",threshold:0});return E(o,()=>{o.current&&c(o.current.getBoundingClientRect())}),(0,d.useEffect)(()=>{a.current&&c(a.current.getBoundingClientRect())},[a]),{containerRef:o,isVisible:u,baseHeaderLayoutRef:a,headerSize:l}},y=a=>{const{containerRef:l,isVisible:c,baseHeaderLayoutRef:o,headerSize:u}=M();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:u?.height},ref:l,children:c&&(0,e.jsx)(S,{ref:o,...a})}),!c&&(0,e.jsx)(S,{...a,sticky:!0,width:u?.width})]})};y.displayName="HeaderLayout";const P=(0,p.ZP)(g.x)`
  width: ${a=>a.width}px;
  z-index: ${({theme:a})=>a.zIndices[1]};
`,S=d.forwardRef(({navigationAction:a,primaryAction:l,secondaryAction:c,subtitle:o,title:u,sticky:i,width:A,...R},B)=>{const j=typeof o=="string";return i?(0,e.jsx)(P,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:A,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(h.k,{justifyContent:"space-between",children:[(0,e.jsxs)(h.k,{children:[a&&(0,e.jsx)(g.x,{paddingRight:3,children:a}),(0,e.jsxs)(g.x,{children:[(0,e.jsx)(x.Z,{variant:"beta",as:"h1",...R,children:u}),j?(0,e.jsx)(x.Z,{variant:"pi",textColor:"neutral600",children:o}):o]}),c?(0,e.jsx)(g.x,{paddingLeft:4,children:c}):null]}),(0,e.jsx)(h.k,{children:l?(0,e.jsx)(g.x,{paddingLeft:2,children:l}):void 0})]})}):(0,e.jsxs)(g.x,{ref:B,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:a?6:8,background:"neutral100","data-strapi-header":!0,children:[a?(0,e.jsx)(g.x,{paddingBottom:2,children:a}):null,(0,e.jsxs)(h.k,{justifyContent:"space-between",children:[(0,e.jsxs)(h.k,{minWidth:0,children:[(0,e.jsx)(x.Z,{as:"h1",variant:"alpha",...R,children:u}),c?(0,e.jsx)(g.x,{paddingLeft:4,children:c}):null]}),l]}),j?(0,e.jsx)(x.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:o}):o]})});S.displayName="BaseHeaderLayout",S.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},S.propTypes={navigationAction:n.node,primaryAction:n.node,secondaryAction:n.node,sticky:n.bool,subtitle:n.oneOfType([n.string,n.node]),title:n.string.isRequired,width:n.number},y.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},y.propTypes={navigationAction:n.node,primaryAction:n.node,secondaryAction:n.node,subtitle:n.oneOfType([n.string,n.node]),title:n.string.isRequired}},27649:function(b,m,t){t.d(m,{o:function(){return f}});var e=t(74512),d=t(8471),n=t(72850);const p=(0,d.ZP)(n.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,f=({labelledBy:v="main-content-title",...E})=>(0,e.jsx)(p,{"aria-labelledby":v,as:"main",id:"main-content",tabIndex:-1,...E})},7961:function(b,m,t){t.d(m,{Z:function(){return n}});var e=t(74512);const d=p=>(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...p,children:[(0,e.jsx)("path",{fill:"#32324D",d:"M0 2.8A.8.8 0 0 1 .8 2h22.4a.8.8 0 0 1 .8.8v2.71a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V2.8Z"}),(0,e.jsx)("path",{fill:"#32324D",d:"M1.922 7.991C.197 6.675 0 6.252 0 5.289h23.953c.305 1.363-1.594 2.506-2.297 3.125-1.953 1.363-6.253 4.36-7.828 5.45-1.575 1.09-3.031.455-3.562 0-2.063-1.41-6.62-4.557-8.344-5.873ZM22.8 18H1.2c-.663 0-1.2.471-1.2 1.053v1.894C0 21.529.537 22 1.2 22h21.6c.663 0 1.2-.471 1.2-1.053v-1.894c0-.582-.537-1.053-1.2-1.053Z"}),(0,e.jsx)("path",{fill:"#32324D",d:"M0 9.555v10.972h24V9.554c-2.633 1.95-8.367 6.113-9.96 7.166-1.595 1.052-3.352.438-4.032 0L0 9.555Z"})]}),n=d}}]);
