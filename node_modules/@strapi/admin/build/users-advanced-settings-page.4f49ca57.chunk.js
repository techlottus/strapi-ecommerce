"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[9460],{84764:function(j,v,t){t.r(v),t.d(v,{default:function(){return N}});var e=t(32735),r=t(20108),i=t(67879),E=t(92802),s=t(24989),x=t(94638),O=t(27649),u=t(82055),m=t(17e3),h=t(41415),R=t(72850),y=t(87933),b=t(49372),p=t(15335),n=t(5803),l=t(68465),d=t(84967),o=t(66456),c=t(88369),a=t(59677),P=[{intlLabel:{id:(0,a.OB)("EditForm.inputToggle.label.email"),defaultMessage:"One account per email address"},description:{id:(0,a.OB)("EditForm.inputToggle.description.email"),defaultMessage:"Disallow the user to create multiple accounts using the same email address with different authentication providers."},name:"unique_email",type:"bool",size:{col:12,xs:12}},{intlLabel:{id:(0,a.OB)("EditForm.inputToggle.label.sign-up"),defaultMessage:"Enable sign-ups"},description:{id:(0,a.OB)("EditForm.inputToggle.description.sign-up"),defaultMessage:"When disabled (OFF), the registration process is forbidden. No one can subscribe anymore no matter the used provider."},name:"allow_register",type:"bool",size:{col:12,xs:12}},{intlLabel:{id:(0,a.OB)("EditForm.inputToggle.label.email-reset-password"),defaultMessage:"Reset password page"},description:{id:(0,a.OB)("EditForm.inputToggle.description.email-reset-password"),defaultMessage:"URL of your application's reset password page."},placeholder:{id:(0,a.OB)("EditForm.inputToggle.placeholder.email-reset-password"),defaultMessage:"ex: https://youtfrontend.com/reset-password"},name:"email_reset_password",type:"text",size:{col:6,xs:12}},{intlLabel:{id:(0,a.OB)("EditForm.inputToggle.label.email-confirmation"),defaultMessage:"Enable email confirmation"},description:{id:(0,a.OB)("EditForm.inputToggle.description.email-confirmation"),defaultMessage:"When enabled (ON), new registered users receive a confirmation email."},name:"email_confirmation",type:"bool",size:{col:12,xs:12}},{intlLabel:{id:(0,a.OB)("EditForm.inputToggle.label.email-confirmation-redirection"),defaultMessage:"Redirection url"},description:{id:(0,a.OB)("EditForm.inputToggle.description.email-confirmation-redirection"),defaultMessage:"After you confirmed your email, choose where you will be redirected."},placeholder:{id:(0,a.OB)("EditForm.inputToggle.placeholder.email-confirmation-redirection"),defaultMessage:"ex: https://youtfrontend.com/email-confirmation"},name:"email_confirmation_redirection",type:"text",size:{col:6,xs:12}}],A=t(24346);const S=new RegExp("(^$)|((.+:\\/\\/.*)(d*)\\/?(.*))");var z=A.Ry().shape({email_confirmation_redirection:A.nK().when("email_confirmation",{is:!0,then:A.Z_().matches(S).required(),otherwise:A.Z_().nullable()}),email_reset_password:A.Z_(s.I0.string).matches(S,s.I0.regex).nullable()});const U=async()=>{const{get:g}=(0,s.tg)(),{data:B}=await g((0,a.Gc)("advanced"));return B},w=g=>{const{put:B}=(0,s.tg)();return B((0,a.Gc)("advanced"),g)},W=()=>e.createElement(s.O4,{permissions:c.Z.readAdvancedSettings},e.createElement(H,null)),H=()=>{const{formatMessage:g}=(0,i.Z)(),B=(0,s.lm)(),{lockApp:K,unlockApp:F}=(0,s.o1)(),{notifyStatus:G}=(0,x.G)(),$=(0,r.useQueryClient)();(0,s.go)();const Q=(0,e.useMemo)(()=>({update:c.Z.updateAdvancedSettings}),[]),{isLoading:V,allowedActions:{canUpdate:X}}=(0,s.ss)(Q),{status:J,data:D}=(0,r.useQuery)("advanced",()=>U(),{onSuccess(){G(g({id:(0,a.OB)("Form.advancedSettings.data.loaded"),defaultMessage:"Advanced settings data has been loaded"}))},onError(){B({type:"warning",message:{id:(0,a.OB)("notification.error"),defaultMessage:"An error occured"}})}}),Y=V||J!=="success",I=(0,r.useMutation)(M=>w(M),{async onSuccess(){await $.invalidateQueries("advanced"),B({type:"success",message:{id:(0,a.OB)("notification.success.saved"),defaultMessage:"Saved"}}),F()},onError(){B({type:"warning",message:{id:(0,a.OB)("notification.error"),defaultMessage:"An error occured"}}),F()},refetchActive:!0}),{isLoading:k}=I,q=async M=>{K();const T=M.email_confirmation?M.email_confirmation_redirection:"";await I.mutateAsync({...M,email_confirmation_redirection:T})};return Y?e.createElement(O.o,{"aria-busy":"true"},e.createElement(s.SL,{name:g({id:(0,a.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"})}),e.createElement(u.T,{title:g({id:(0,a.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"})}),e.createElement(m.D,null,e.createElement(s.dO,null))):e.createElement(O.o,{"aria-busy":k},e.createElement(s.SL,{name:g({id:(0,a.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"})}),e.createElement(E.J9,{onSubmit:q,initialValues:D.settings,validateOnChange:!1,validationSchema:z,enableReinitialize:!0},({errors:M,values:T,handleChange:Z,isSubmitting:_})=>e.createElement(s.l0,null,e.createElement(u.T,{title:g({id:(0,a.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"}),primaryAction:e.createElement(h.z,{loading:_,type:"submit",disabled:!X,startIcon:e.createElement(o.Z,null),size:"S"},g({id:"global.save",defaultMessage:"Save"}))}),e.createElement(m.D,null,e.createElement(R.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(y.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(b.Z,{variant:"delta",as:"h2"},g({id:"global.settings",defaultMessage:"Settings"})),e.createElement(p.r,{gap:6},e.createElement(n.P,{col:6,s:12},e.createElement(l.P,{label:g({id:(0,a.OB)("EditForm.inputSelect.label.role"),defaultMessage:"Default role for authenticated users"}),value:T.default_role,hint:g({id:(0,a.OB)("EditForm.inputSelect.description.role"),defaultMessage:"It will attach the new authenticated user to the selected role."}),onChange:f=>Z({target:{name:"default_role",value:f}})},D.roles.map(f=>e.createElement(d.W,{key:f.type,value:f.type},f.name)))),P.map(f=>{let C=T[f.name];return C||(C=f.type==="bool"?!1:""),e.createElement(n.P,{key:f.name,...f.size},e.createElement(s.jm,{...f,value:C,error:M[f.name],disabled:f.name==="email_confirmation_redirection"&&T.email_confirmation===!1,onChange:Z}))}))))))))};var N=W},59677:function(j,v,t){t.d(v,{YX:function(){return E},Gc:function(){return O},OB:function(){return u.Z}});var e=t(86834),r=t.n(e),E=m=>Object.keys(m).reduce((h,R)=>{const y=m[R].controllers,b=Object.keys(y).reduce((p,n)=>(r()(y[n])||(p[n]=y[n]),p),{});return r()(b)||(h[R]={controllers:b}),h},{}),s=t(90201),O=m=>`/${s.Z}/${m}`,u=t(82069)},17e3:function(j,v,t){t.d(v,{D:function(){return s}});var e=t(74512),r=t(32735),i=t(60216),E=t(72850);const s=({children:x})=>(0,e.jsx)(E.x,{paddingLeft:10,paddingRight:10,children:x});s.propTypes={children:i.node.isRequired}},82055:function(j,v,t){t.d(v,{T:function(){return y}});var e=t(74512),r=t(32735),i=t(60216),E=t(8471);const s=n=>{const l=(0,r.useRef)(null),[d,o]=(0,r.useState)(!0),c=([a])=>{o(a.isIntersecting)};return(0,r.useEffect)(()=>{const a=l.current,L=new IntersectionObserver(c,n);return a&&L.observe(l.current),()=>{a&&L.disconnect()}},[l,n]),[l,d]};var x=t(63060);const O=(n,l)=>{const d=(0,x.W)(l);(0,r.useLayoutEffect)(()=>{const o=new ResizeObserver(d);return Array.isArray(n)?n.forEach(c=>{c.current&&o.observe(c.current)}):n.current&&o.observe(n.current),()=>{o.disconnect()}},[n,d])};var u=t(72850),m=t(87933),h=t(49372);const R=()=>{const n=(0,r.useRef)(null),[l,d]=(0,r.useState)(null),[o,c]=s({root:null,rootMargin:"0px",threshold:0});return O(o,()=>{o.current&&d(o.current.getBoundingClientRect())}),(0,r.useEffect)(()=>{n.current&&d(n.current.getBoundingClientRect())},[n]),{containerRef:o,isVisible:c,baseHeaderLayoutRef:n,headerSize:l}},y=n=>{const{containerRef:l,isVisible:d,baseHeaderLayoutRef:o,headerSize:c}=R();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:c?.height},ref:l,children:d&&(0,e.jsx)(p,{ref:o,...n})}),!d&&(0,e.jsx)(p,{...n,sticky:!0,width:c?.width})]})};y.displayName="HeaderLayout";const b=(0,E.ZP)(u.x)`
  width: ${n=>n.width}px;
  z-index: ${({theme:n})=>n.zIndices[1]};
`,p=r.forwardRef(({navigationAction:n,primaryAction:l,secondaryAction:d,subtitle:o,title:c,sticky:a,width:L,...P},A)=>{const S=typeof o=="string";return a?(0,e.jsx)(b,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:L,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(m.k,{justifyContent:"space-between",children:[(0,e.jsxs)(m.k,{children:[n&&(0,e.jsx)(u.x,{paddingRight:3,children:n}),(0,e.jsxs)(u.x,{children:[(0,e.jsx)(h.Z,{variant:"beta",as:"h1",...P,children:c}),S?(0,e.jsx)(h.Z,{variant:"pi",textColor:"neutral600",children:o}):o]}),d?(0,e.jsx)(u.x,{paddingLeft:4,children:d}):null]}),(0,e.jsx)(m.k,{children:l?(0,e.jsx)(u.x,{paddingLeft:2,children:l}):void 0})]})}):(0,e.jsxs)(u.x,{ref:A,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:n?6:8,background:"neutral100","data-strapi-header":!0,children:[n?(0,e.jsx)(u.x,{paddingBottom:2,children:n}):null,(0,e.jsxs)(m.k,{justifyContent:"space-between",children:[(0,e.jsxs)(m.k,{minWidth:0,children:[(0,e.jsx)(h.Z,{as:"h1",variant:"alpha",...P,children:c}),d?(0,e.jsx)(u.x,{paddingLeft:4,children:d}):null]}),l]}),S?(0,e.jsx)(h.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:o}):o]})});p.displayName="BaseHeaderLayout",p.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},p.propTypes={navigationAction:i.node,primaryAction:i.node,secondaryAction:i.node,sticky:i.bool,subtitle:i.oneOfType([i.string,i.node]),title:i.string.isRequired,width:i.number},y.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},y.propTypes={navigationAction:i.node,primaryAction:i.node,secondaryAction:i.node,subtitle:i.oneOfType([i.string,i.node]),title:i.string.isRequired}},27649:function(j,v,t){t.d(v,{o:function(){return s}});var e=t(74512),r=t(8471),i=t(72850);const E=(0,r.ZP)(i.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,s=({labelledBy:x="main-content-title",...O})=>(0,e.jsx)(E,{"aria-labelledby":x,as:"main",id:"main-content",tabIndex:-1,...O})}}]);
